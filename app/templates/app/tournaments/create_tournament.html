{% extends "app/layout.html" %}

{% block content %}
<div class="container">
    <h1 class="text-center mb-4">Создание нового турнира</h1>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <form method="post" id="tournamentForm">
                {% csrf_token %}

                <!-- Название турнира -->
                <div class="form-group mb-3">
                    <label for="{{ form.name.id_for_label }}">Название турнира*</label>
                    {{ form.name }}
                    {% if form.name.errors %}
                    <div class="text-danger">{{ form.name.errors }}</div>
                    {% endif %}
                </div>

                <!-- Максимальное количество команд -->
                <div class="form-group mb-3">
                    <label for="{{ form.max_teams.id_for_label }}">Максимальное количество команд*</label>
                    {{ form.max_teams }}
                    {% if form.max_teams.errors %}
                    <div class="text-danger">{{ form.max_teams.errors }}</div>
                    {% endif %}
                </div>

                <!-- Дата начала -->
                <div class="form-group mb-3">
                    <label for="{{ form.start_date.id_for_label }}">Дата начала турнира*</label>
                    {{ form.start_date }}
                    {% if form.start_date.errors %}
                    <div class="text-danger">{{ form.start_date.errors }}</div>
                    {% endif %}
                </div>

                <!-- Дисциплина -->
                <div class="form-group mb-3">
                    <label for="{{ form.discipline.id_for_label }}">Дисциплина*</label>
                    {{ form.discipline }}
                    {% if form.discipline.errors %}
                    <div class="text-danger">{{ form.discipline.errors }}</div>
                    {% endif %}
                </div>

                <!-- Формат игры -->
                <div class="form-group mb-3">
                    <label for="{{ form.game_format.id_for_label }}">Формат игры*</label>
                    {{ form.game_format }}
                    {% if form.game_format.errors %}
                    <div class="text-danger">{{ form.game_format.errors }}</div>
                    {% endif %}
                </div>

                <!-- Формат турнира -->
                <div class="form-group mb-3">
                    <label for="{{ form.tournament_format.id_for_label }}">Формат турнира*</label>
                    {{ form.tournament_format }}
                    {% if form.tournament_format.errors %}
                    <div class="text-danger">{{ form.tournament_format.errors }}</div>
                    {% endif %}
                </div>

                <!-- Локация -->
                <div class="form-group mb-3">
                    <label for="{{ form.location.id_for_label }}">Локация турнира*</label>
                    {{ form.location }}
                    {% if form.location.errors %}
                    <div class="text-danger">{{ form.location.errors }}</div>
                    {% endif %}
                </div>

                <!-- Описание -->
                <div class="form-group mb-4">
                    <label for="{{ form.description.id_for_label }}">Описание турнира</label>
                    {{ form.description }}
                    {% if form.description.errors %}
                    <div class="text-danger">{{ form.description.errors }}</div>
                    {% endif %}
                </div>

                <button type="submit" class="btn btn-primary btn-block">Создать турнир</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function () {
        $('#id_discipline').change(function () {
            var discipline = $(this).val();
            var $gameFormat = $('#id_game_format');

            $gameFormat.empty();

            if (discipline === 'Dota 2') {
                $gameFormat.append('<option value="1x1">1x1</option>');
                $gameFormat.append('<option value="5x5">5x5</option>');
            } else if (discipline === 'CS 2' || discipline === 'LoL') {
                $gameFormat.append('<option value="1x1">1x1</option>');
                $gameFormat.append('<option value="2x2">2x2</option>');
                $gameFormat.append('<option value="5x5">5x5</option>');
            } else if (discipline === 'Valorant') {
                $gameFormat.append('<option value="1x1">1x1</option>');
                $gameFormat.append('<option value="2x2">2x2</option>');
                $gameFormat.append('<option value="3x3">3x3</option>');
                $gameFormat.append('<option value="5x5">5x5</option>');
            }
        });
    });
</script>
{% endblock %}